Pass 1 completed with 0 errors
00000000          	.data
                  
00000000 0040     N: 			.word16 64       
00000008 0020     MAX_TAP:	.word16 32
00000010 0008     TAP:		.word16 8
                  
00000018          y:			.space 64
00000058 0003.558363e+000 b:			.double	3.558363
00000060 -005.428590e-001 			.double -0.542859
00000068 -009.283220e-001 			.double -0.928322
00000070 -009.934280e-001 			.double -0.993428
00000078 0004.643953e+000 			.double 4.643953
00000080 -005.909149e+000 			.double -5.909149
00000088 0001.722120e+000 			.double 1.722120
00000090 -001.854375e+000 			.double -1.854375
00000098 -001.967672e+000 			.double -1.967672
000000a0 -002.170269e+000 			.double -2.170269
000000a8 0006.732720e-001 			.double 0.673272
000000b0 0001.825480e-001 			.double 0.182548
000000b8 -004.812593e+000 			.double -4.812593
000000c0 0008.182700e-001 			.double 0.818270
000000c8 0008.895980e-001 			.double 0.889598
000000d0 0003.229370e-001 			.double 0.322937
000000d8 -004.305760e-001 			.double	-0.430576
000000e0 -004.259421e+000 			.double -4.259421
000000e8 -009.835970e-001 			.double -0.983597
000000f0 0004.285341e+000 			.double 4.285341
000000f8 -002.333795e+000 			.double -2.333795
00000100 0001.856496e+000 			.double 1.856496
00000108 -004.711222e+000 			.double -4.711222
00000110 -005.175850e-001 			.double -0.517585
00000118 -008.376492e+000 			.double -8.376492
00000120 -001.440117e+000 			.double -1.440117
00000128 -006.255069e+000 			.double -6.255069
00000130 -002.030000e-004 			.double -0.000203
00000138 0008.819220e-001 			.double 0.881922
00000140 0006.955272e+000 			.double 6.955272
00000148 -002.092730e-001 			.double -0.209273
00000150 0005.219892e+000 			.double 5.219892
                  
00000158 0002.863810e-001 x:			.double	0.286381
00000160 0003.103980e-001 			.double 0.310398
00000168 0007.323080e-001 			.double 0.732308
00000170 0003.019560e-001 			.double 0.301956
00000178 0005.352300e-002 			.double 0.053523
00000180 0004.316170e-001 			.double 0.431617
00000188 0009.994980e-001 			.double 0.999498
00000190 0008.014690e-001 			.double 0.801469
00000198 0006.399670e-001 			.double 0.639967
000001a0 0002.931920e-001 			.double 0.293192
000001a8 0004.047200e-001 			.double 0.404720
000001b0 0008.231730e-001 			.double 0.823173
000001b8 0006.952690e-001 			.double 0.695269
000001c0 0007.444800e-001 			.double 0.744480
000001c8 0006.769030e-001 			.double 0.676903
000001d0 0009.686510e-001 			.double 0.968651
000001d8 0005.247160e-001 			.double 0.524716
000001e0 0008.436090e-001 			.double 0.843609
000001e8 0005.620260e-001 			.double 0.562026
000001f0 0002.974920e-001 			.double 0.297492
000001f8 0003.849240e-001 			.double 0.384924
00000200 0003.796650e-001 			.double 0.379665
00000208 0008.791600e-002 			.double 0.087916
00000210 0005.351400e-001 			.double 0.535140
00000218 0002.249080e-001 			.double 0.224908
00000220 0001.369650e-001 			.double 0.136965
00000228 0001.861640e-001 			.double 0.186164
00000230 0008.118940e-001 			.double 0.811894
00000238 0001.046600e-002 			.double 0.010466
00000240 0007.543230e-001 			.double 0.754323
00000248 0002.273730e-001 			.double 0.227373
00000250 0002.968480e-001 			.double 0.296848
00000258 0006.472000e-002 			.double 0.064720
00000260 0009.596810e-001 			.double 0.959681
00000268 0005.988040e-001 			.double 0.598804
00000270 0001.182430e-001 			.double 0.118243
00000278 0003.912980e-001 			.double 0.391298
00000280 0005.983020e-001 			.double 0.598302
00000288 0009.197120e-001 			.double 0.919712
00000290 0003.126500e-002 			.double 0.031265
00000298 0008.914940e-001 			.double 0.891494
000002a0 0003.244320e-001 			.double 0.324432
000002a8 0008.544380e-001 			.double 0.854438
000002b0 0005.867630e-001 			.double 0.586763
000002b8 0006.891200e-002 			.double 0.068912
000002c0 0005.313410e-001 			.double 0.531341
000002c8 0005.554140e-001 			.double 0.555414
000002d0 0005.936280e-001 			.double 0.593628
000002d8 0003.749500e-001 			.double 0.374950
000002e0 0001.174410e-001 			.double 0.117441
000002e8 0008.911200e-001 			.double 0.891120
000002f0 0007.598740e-001 			.double 0.759874
000002f8 0004.971060e-001 			.double 0.497106
00000300 0009.790360e-001 			.double 0.979036
00000308 0002.950140e-001 			.double 0.295014
00000310 0007.220140e-001 			.double 0.722014
00000318 0001.160010e-001 			.double 0.116001
00000320 0004.811780e-001 			.double 0.481178
00000328 0005.339080e-001 			.double 0.533908
00000330 0001.264670e-001 			.double 0.126467	
00000338 0002.355000e-001 			.double 0.235500
00000340 0007.612810e-001 			.double 0.761281
00000348 0004.233150e-001 			.double 0.423315
00000350 0003.002200e-001 			.double 0.300220
                  
00000358          STRING:		.asciiz "Result data:\n"
         52657375
         6c742064
         6174613a
         0a00
00000368          NEWLINE:	.asciiz "\n"
         0a
                  
                  ;
                  ; Memory Mapped I/O area
                  ;
                  ; Address of CONTROL and DATA registers
                  ;
                  ; Set CONTROL = 1, Set DATA to Unsigned Integer to be output
                  ; Set CONTROL = 2, Set DATA to Signed Integer to be output
                  ; Set CONTROL = 3, Set DATA to Floating Point to be output
                  ; Set CONTROL = 4, Set DATA to address of string to be output
                  ; Set CONTROL = 5, Set DATA+5 to x coordinate, DATA+4 to y coordinate, and DATA to RGB colour to be output
                  ; Set CONTROL = 6, Clears the terminal screen
                  ; Set CONTROL = 7, Clears the graphics screen
                  ; Set CONTROL = 8, read the DATA (either an integer or a floating-point) from the keyboard
                  ; Set CONTROL = 9, read one byte from DATA, no character echo.
                  ;
                  
00000370 00010000 CONTROL:	.word32 0x10000
00000378 00010008 DATA:		.word32 0x10008
                  
00000000          	.text
                  
                  ;	fir_filter(y,b,x,N,TAP);
                  ;	printf("Result data:\n");
                  ;	for(i=0; i < N; i++)
                  ;		printf("%f %f\n", (double)i, y[i]);
                  ;	printf("end\n");
                  ;	return 0;
                  
00000000 9c180378 			LWU $t8,DATA($zero)		;$t8 = address of DATA register
00000004 9c190370 			LWU $t9,CONTROL($zero)	;$t9 = address of CONTROL register
00000008 601d0180 			DADDI $sp,$zero,0x180	;position a stack in data memory 0x140 is enough for 6*64bit numbers
                  						
0000000c ffbf0000 			SD $ra,($sp)					
00000010 63bd0040 			DADDI $sp,$sp,64		;push return address onto stack			
                  			
00000014 60080018 			DADDI $t0,$zero,y
00000018 ffa80000 			SD $t0,($sp)
0000001c 63bd0040 			DADDI $sp,$sp,64		;push y onto stack
                  			
00000020 60080058 			DADDI $t0,$zero,b
00000024 ffa80000 			SD $t0,($sp)
00000028 63bd0040 			DADDI $sp,$sp,64		;push b onto stack			
                  			
0000002c 60080158 			DADDI $t0,$zero,x
00000030 ffa80000 			SD $t0,($sp)
00000034 63bd0040 			DADDI $sp,$sp,64		;push x onto stack		
                  			
00000038 60080000 			DADDI $t0,$zero,N
0000003c ffa80000 			SD $t0,($sp)
00000040 63bd0040 			DADDI $sp,$sp,64		;push N onto stack
                  			
00000044 60080010 			DADDI $t0,$zero,TAP
00000048 ffa80000 			SD $t0,($sp)		
0000004c 63bd0040 			DADDI $sp,$sp,64		;push TAP onto stack
                  			
00000050 0c00001e 			JAL FIR 				;fir_filter(y,b,x,N,TAP);
00000054 63bdffc0 MAIN:		DADDI $sp,$sp,-64		;pop tap off the stack
                  			
00000058 63bdffc0 			DADDI $sp,$sp,-64		;pop n off the stack
                  			
0000005c 63bdffc0 			DADDI $sp,$sp,-64		;pop x off the stack
                  			
00000060 63bdffc0 			DADDI $sp,$sp,-64		;pop b off the stack
                  			
00000064 63bdffc0 			DADDI $sp,$sp,-64		;pop y off the stack
00000068 dfa40000 			LD $a0,($sp)
                  			
0000006c 600f0004 			DADDI $t7,$zero,4		;set for string output
00000070 600e0358 			DADDI $t6,$zero,STRING	;printf("Result data:\n");
00000074 ff0e0000 			SD $t6,($t8)
00000078 ff2f0000 			SD $t7,($t9)
                  			
                  			
                  			
0000007c 64080000 			DADDUI $t0,$zero,0		;i=0
00000080 2d090000 FOR:		SLTIU $t1,$t0,N			;t1 = i < N
00000084 18090010 			BEQZ $t1,endFOR			;if (i >= N) goto endFOR
                  			
00000088 640f0003 			DADDUI $t7,$zero,3		;set for floating point to be output
0000008c 650e0000 			DADDUI $t6,$t0,0			;printf("%f\n" (double)i);
00000090 ff0e0000 			SD $t6,($t8)
00000094 ff2f0000 			SD $t7,($t9)
                  			
00000098 010050f8 			DSLL $t2,$t0,3			;t2 = i << 3
0000009c 008a502c 			DADD $t2,$a0,$t2	;t2 = &y[i]
000000a0 dd4a0000 			LD $t2,($t2)			;t2 = y[i]
000000a4 654e0000 			DADDUI $t6,$t2,0	;printf("%f\n" y[i]);
000000a8 ff0e0000 			SD $t6,($t8)		
000000ac ff2f0000 			SD $t7,($t9)
                  			
000000b0 640f0004 			DADDUI $t7,$zero,4		;set for string output
000000b4 640e0368 			DADDUI $t6,$zero,NEWLINE	;printf("Result data:\n");
000000b8 ff0e0000 			SD $t6,($t8)
000000bc ff2f0000 			SD $t7,($t9)
                  
000000c0 65080001 			DADDUI $t0,$t0,1			;i++
000000c4 0bffffee 			J FOR					;iterate
000000c8 04000000 endFOR:		HALT						;return 0
                  
                  
                  
                  
                  ;
                  ; This implements an n-tap FIR filter that takes an array of doubles x[] and calculates
                  ; a weighted sum using the coefficients in b[] for each output element in y[].
                  ;
                  ; void fir_filter(double y[], double b[], double x[], int n, int tap)
                  ; {
                  ; int i, j;
                  ; for(i = tap - 1; i < n; i = i + 1)
                  ; {
                  ; 	y[i] = b[0]
                  ; 	for(j = 1; j < tap; j++)
                  ;		y[i] += b[j]*x[i-j];
                  ; 	}
                  ; }
                  
                          
000000cc 63bdffc0 FIR:		DADDI $sp,$sp,-64		;pop tap off the stack
000000d0 dfa80000 			LD $t0,($sp)
000000d4 63bdffc0 			DADDI $sp,$sp,-64		;pop n off the stack
000000d8 dfa70000 			LD $a3,($sp)
000000dc 63bdffc0 			DADDI $sp,$sp,-64		;pop x off the stack
000000e0 dfa60000 			LD $a2,($sp)
000000e4 63bdffc0 			DADDI $sp,$sp,-64		;pop b off the stack
000000e8 dfa50000 			LD $a1,($sp)
000000ec 63bdffc0 			DADDI $sp,$sp,-64		;pop y off the stack
000000f0 dfa40000 			LD $a0,($sp)
                  			
000000f4 6109ffff 			DADDI $t1,$t0,-1		;t1 = i = tap - 1
                  				
000000f8 0127502a FOR1:		SLT $t2,$t1,$a3		;t2 = t1 < a3 = i < n
000000fc 180a0016 			BEQZ $t2,endFOR1		;if (t1 >= a3) = if (i >= n) goto endFOR1
00000100 dcab0000 			LD $t3,($a1)			;t3 = b[0]
                  		
00000104 012050f8 			DSLL $t2,$t1,3			;t2 = i << 3
00000108 008a502c 			DADD $t2,$a0,$t2		;t2 = &y[i]
0000010c fd4b0000 			SD $t3,($t2)			;y[i] = b[0]
                  		
00000110 640c0001 			DADDUI $t4,$zero,1	;t4 = j = 1
                  
00000114 0188682a FOR2:		SLT $t5,$t4,$t0		;t5 = j < tap
00000118 180d000d 			BEQZ $t5,endFOR2		;if (j >= tap) goto endFOR2
                  			
0000011c 018068f8 			DSLL $t5,$t4,3			;t5 = j << 3
00000120 00ad682c 			DADD $t5,$a1,$t5		;t5 = &b[j]
00000124 ddad0000 			LD $t5,($t5)			;t5 = b[j]
                  
00000128 012c702e 			DSUB $t6,$t1,$t4		;t6 = i - j
0000012c 01c070f8 			DSLL $t6,$t6,3			;t6 = (i - j) << 3
00000130 00ce702c 			DADD $t6,$a2,$t6		;t6 = &x[i-j]
00000134 ddce0000 			LD $t6,($t6)			;t6 = x[i-j]
                  			
00000138 01ae681c 			DMUL $t5,$t5,$t6		;t5 = b[j]*x[i-j]
                  			
0000013c dd4e0000 			LD $t6,($t2)			;t6 = y[i]
00000140 01cd702c 			DADD $t6,$t6,$t5		;t6 = y[i] + b[j]*x[i-j]
00000144 fd4e0000 			SD $t6,($t2)			;y[i] = t6 = y[i] + b[j]*x[i-j]
                  		
00000148 658c0001 			DADDUI $t4,$t4,1		;j++
0000014c 0bfffff1 			J FOR2					;iterate
                  			
00000150 65290001 endFOR2:	DADDUI $t1,$t1,1			;i++
00000154 0bffffe8 			J FOR1					;iterate
                  
00000158 63bdffc0 endFOR1:	DADDI $sp,$sp,-64		;pop return address off the stack
0000015c dfbf0000 			LD $ra,($sp)			;ra -> return address
                  
00000160 ffa40000 			SD $a0,($sp)
00000164 67bd0040 			DADDUI $sp,$sp,64		;push y onto stack
00000168 ffa50000 			SD $a1,($sp)
0000016c 67bd0040 			DADDUI $sp,$sp,64		;push b onto stack					
00000170 ffa60000 			SD $a2,($sp)
00000174 67bd0040 			DADDUI $sp,$sp,64		;push x onto stack	
00000178 ffa70000 			SD $a3,($sp)
0000017c 67bd0040 			DADDUI $sp,$sp,64		;push N onto stack
00000180 ffa80000 			SD $t0,($sp)			
00000184 67bd0040 			DADDUI $sp,$sp,64		;push TAP onto stack
00000188 001f0008 			JR $ra					;return to MAIN

Pass 2 completed with 0 errors
Code Symbol Table
                MAIN = 00000054
                 FOR = 00000080
              endFOR = 000000c8
                 FIR = 000000cc
                FOR1 = 000000f8
                FOR2 = 00000114
             endFOR2 = 00000150
             endFOR1 = 00000158
Data Symbol Table
                   N = 00000000
             MAX_TAP = 00000008
                 TAP = 00000010
                   y = 00000018
                   b = 00000058
                   x = 00000158
              STRING = 00000358
             NEWLINE = 00000368
             CONTROL = 00000370
                DATA = 00000378
